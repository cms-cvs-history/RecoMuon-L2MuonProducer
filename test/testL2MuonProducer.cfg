process L2MuonProduction = {

# Event source
	source = PoolSource{
 		untracked vstring fileNames ={'file:/afs/cern.ch/cms/Tutorials/july06/MuonReconstruction/MuonRecHit.root'}
 		untracked int32 maxEvents = -1
 		untracked uint32 debugVebosity = 10
  		untracked bool   debugFlag     = true
	}


# Messages
	service = MessageLogger {
		untracked vstring destinations = { "cout" }
		untracked PSet cout = {
			untracked bool noLineBreaks = true 
			untracked string threshold = "INFO"
		}
        }


# Magnetic Field
        include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"


# Geometries
	include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi" 
	include "Geometry/CommonDetUnit/data/bareGlobalTrackingGeometry.cfi"
	include "Geometry/DTGeometry/data/dtGeometry.cfi"
	include "Geometry/CSCGeometry/data/cscGeometry.cfi"
	include "RecoMuon/DetLayers/data/muonDetLayerGeometry.cfi"


# Seed generator
	include "RecoMuon/MuonSeedGenerator/data/MuonSeedProducer.cfi"


# Standalone muon producer
	include "RecoMuon/L2MuonProducer/data/L2MuonProducer.cfi"
	replace L2Muon.STATrajBuilderParameters.RefitterParameters.EnableRPCMeasurement = false
	replace L2Muon.STATrajBuilderParameters.BWFilterParameters.EnableRPCMeasurement = false


# Output
	module out = PoolOutputModule {
		untracked string fileName ="STAMuons.root"
	}

# Path
	path p = {L1MuonSeed,L2Muon}
	endpath this_is_the_end = {out}
}
